{% extends "base.html" %}
{% block content %}
<div class="container-fluid mt-4">
    <h2>ðŸšš Gestione Trasporti</h2>
    
    <form method="GET" class="row g-3 mb-4 p-3 bg-light border rounded">
        <div class="col-md-2"><input type="text" name="data" class="form-control" placeholder="Data"></div>
        <div class="col-md-2"><input type="text" name="cliente" class="form-control" placeholder="Cliente"></div>
        <div class="col-md-2"><input type="text" name="trasportatore" class="form-control" placeholder="Trasportatore"></div>
        <div class="col-md-2"><input type="text" name="tipo_mezzo" class="form-control" placeholder="Mezzo"></div>
        <div class="col-md-2"><input type="text" name="consolidato" class="form-control" placeholder="Consolidato"></div>
        <div class="col-md-2"><button type="submit" class="btn btn-primary w-100">Filtra</button></div>
    </form>

    <button type="button" class="btn btn-success mb-3" data-bs-toggle="modal" data-bs-target="#reportModal">
        ðŸ“Š Crea Report Mensile
    </button>

    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Data</th><th>Cliente</th><th>Destinazione</th><th>Mezzo</th>
                    <th>Trasportatore</th><th>DDT Uscita</th><th>Consolidato</th><th>Costo</th>
                </tr>
            </thead>
            <tbody>
                {% for t in trasporti %}
                <tr>
                    <td>{{ t.data }}</td>
                    <td>{{ t.cliente }}</td>
                    <td>-</td> <td>{{ t.tipo_mezzo }}</td>
                    <td>{{ t.trasportatore }}</td>
                    <td>{{ t.ddt_uscita }}</td>
                    <td>{{ t.consolidato }}</td>
                    <td>â‚¬ {{ t.costo }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="modal fade" id="reportModal" tabindex="-1">
    <div class="modal-dialog">
        <form action="{{ url_for('report_trasporti') }}" method="POST">
        <div class="modal-content">
            <div class="modal-header"><h5>Genera Report Trasporti</h5></div>
            <div class="modal-body">
                <label>Mese (YYYY-MM)</label>
                <input type="month" name="mese" class="form-control mb-2" required>
                <label>Filtra Mezzo (Opzionale)</label>
                <input type="text" name="tipo_mezzo" class="form-control mb-2">
                <label>Filtra Cliente (Opzionale)</label>
                <input type="text" name="cliente" class="form-control">
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-success">Stampa Report</button>
            </div>
        </div>
        </form>
    </div>
</div>
{% endblock %}
